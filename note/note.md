# 小程序开发

## 小程序简介

### 小程序与普通网页开发的区别

运行环境不同

- 网页运行在浏览器环境中
- 小程序运行在微信环境中

### API不同

- 由于运行环境的不同，所以小程序中无法调用DOM和BOM的API
- 但是，小程序中可以调用微信环境提供的各种API，例如：
  - 地理定位
  - 扫码
  - 支付

### 开发模式不同

- 网页开发模式：浏览器+代码编辑器
- 小程序有自己的一套标准开发模式
  - 申请小程序开发账号
  - 安装小程序开发者工具
  - 创建和配置小程序项目

## 第一个小程序

### 注册小程序开发账号

1. 点击注册按钮

   使用浏览器打开 https://mp.weixin.qq.com/ 网址，点击右上角的**立即注册**即可进入到小程序开发账号被的注册流程

   ![注册截图](D:\图片\小程序相关截图\注册截图.png)

2. 选择注册类型

   小程序![注册截图2](D:\图片\小程序相关截图\注册截图2.png)

3. 填写账号信息

4. 提示邮箱激活

   ![邮箱激活](D:\图片\小程序相关截图\邮箱激活.png)

5. 点击链接激活账号

6. 选择主题类型（个人）

7. 主题信息登记（填写个人信息）

8. 获取小程序的AppID

   登录最初始的网址，然后点最左侧的

   ![小程序id](D:\图片\小程序相关截图\小程序id.png)

### 安装开发者工具

1. 了解微信开发者工具

   **微信开发者工具**是官方推荐使用的小程序开发工具，它提供的主要功能如下：

   1. 快速创建小程序项目
   2. 代码的查看和编辑
   3. 对小程序功能进行调试
   4. 小程序的预览和发布

2. 下载

   推荐下载和安装最新的**稳定版**（Stable Build）的微信开发者工具，下载页面的链接如下：

   https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html6
   
3. 安装

   - 正常安装流程即可

4. 扫码登陆即可

5. 设置外观和代理

   在设置里将代理改成**不使任何代理，勾选后直连网络**

### 创建小程序项目

1. 点击加号按钮
2. 填写项目信息
   - 填写项目名称
   - 选择目录
   - 填写自己的AppID
   - 开发模式选小程序
   - 后端服务选不使用云服务
   - 最后点击确定
3. 项目创建完成
4. 在模拟器上查看项目效果
5. 主界面5个组成部分
   1. 菜单栏
   2. 工具栏
   3. 模拟器
   4. 代码编辑区
   5. 调试区

## 小程序代码的构成

### 项目结构

1. 了解项目的基本组成结构

   1. pages用来存放所有小程序的界面
   2. utils用来存放工具性质的模块（例如：格式化时间的自定义模块）
   3. app.js小程序项目的入口文件
   4. app.json小程序项目的全局配置文件
   5. app.wxss小程序项目的全局样式文件
   6. project.config.json项目的配置文件
   7. sitemap.json用来配置小程序及其页面是否允许被微信索引

2. 小程序页面的组成部分

   小程序官方建议把所有小程序的页面都存放在pages目录中，以单独的文件夹存在

   其中每个页面由4个基本文件组成，他们分别是：

   1. .js文件（页面的脚本文件，岑放页面的数据、时间处理函数等）
   2. .json文件（当前页面的配置文件，配置窗口的外观、表现等）
   3. .wxml文件（页面的模板结构文件）
   4. .wxss文件（当前页面的样式表文件）

### JOSN配置文件

1. JOSN配置文件的作用

   JOSN是一种数据格式，在实际开发中，JOSN总是以配置文件的形式出现。小程序项目中也不例外：通过不同的.json文件，可以对小程序项目进行不同级别的配置

   小程序中有4种josn配置文件，分别是：

   1. 项目根目录中的app.json配置文件
   2. 项目根目录中的project.config.json配置文件
   3. 项目根目录中的sitemap.json配置文件
   4. 每个页面文件加中的.json文件 

2. app.json文件

   app.json是当前小程序的全局配置，包括了小程序的所有页面路径、窗口外观、界面表现、底部tab等。

   Demo项目里边的app.json配置内容如下：

   ```js
   {
       "pages"[
           
       ],
       "window":{
           
       }
       "style":"",
       "sitemapLocation":""
   }
   ```

   简单了解下这4个配置项的作用：

   1. pages：用来记录当前小程序所有页面的路径
   2. window：全集定义小程序所有页面的背景色、文字颜色等
   3. style：全局定义小程序组件所使用的昂是版本
   4. sitemapLocation：用来指明sitmap.josn的位置

3. project.config.json文件

   project.config.json是项目的配置文件，用来记录我们对小程序开发工具所做的个性化配置，例如：

   - setting中保存了编译相关配置
   - projectname中保存的是项目名称
   - appid中保存的是小程序的账号ID

4. sietmap.josn文件

   微信现已开发小程序内搜索，效果类似于PC网页的SEO。sitemap.json文件用来配置小程序页面是否允许微信索引

   开发者允许微信索引时，微信会通过爬虫的形式，为小程序的页面建立索引。当用户的搜索关键字和页面的索引配置成功的时候，小程序的页面将可能展示在搜索结果中。

5. 页面的.json配置文件

   小程序中的每一个页面，可以使用.json文件来对本页面的窗口外观进行配置，页面中的配置项会覆盖app.json的window中相同的配置项。
   
6. 新建小程序页面

   只需要在app.json->pages中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的页面文件，

   
